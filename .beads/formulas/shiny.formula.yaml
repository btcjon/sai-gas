# shiny.formula.yaml
# Engineer in a Box - the canonical right way to do engineering
# Named for Mad Max: "Shiny and chrome!"

formula: shiny
description: |
  The canonical engineering workflow. Design before you code.
  Review before you ship. Test before you submit.

  This is what "doing it right" looks like.
version: 1

vars:
  feature: "{{feature}}"           # What you're building
  assignee: "{{assignee}}"         # Who's doing the work

steps:
  - id: design
    description: |
      Think carefully about architecture before writing code.

      Consider:
      - How does this fit into the existing system?
      - What are the edge cases?
      - What could go wrong?
      - Is there a simpler approach?

      Output a brief design doc or notes.

  - id: implement
    description: |
      Write the code for {{feature}}.

      Follow the design. Keep it simple. Don't gold-plate.
      Write code that's easy to review.
    needs: [design]

  - id: review
    description: |
      Review the implementation.

      Check for:
      - Does it match the design?
      - Are there obvious bugs?
      - Is it readable and maintainable?
      - Are there security concerns?
    needs: [implement]

  - id: test
    description: |
      Write and run tests.

      - Unit tests for new code
      - Integration tests if needed
      - Run the full test suite
      - Fix any regressions
    needs: [review]

  - id: submit
    description: |
      Submit for merge.

      - Final check: git status, git diff
      - Commit with clear message
      - Push and create PR (or merge directly if crew)
      - Notify relevant parties
    needs: [test]
